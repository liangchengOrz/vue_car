{"ast":null,"code":"import axios from \"axios\";\nimport Loading from '../components/Loading.vue';\nexport default {\n  name: \"VueYdCar\",\n  components: {\n    Loading\n  },\n\n  data() {\n    return {\n      car: [],\n      subTotal: \"\",\n      bool: '',\n      isLoading: false\n    };\n  },\n\n  created() {\n    this.isLoading = true;\n    axios.get(\"https://dahua0822-api.herokuapp.com/cart\").then(res => {\n      // console.log(res.data.data);\n      this.isLoading = false;\n      this.car = res.data.data.items;\n      this.subTotal = res.data.data.subTotal;\n    });\n  },\n\n  methods: {\n    toGoogs() {\n      this.$router.push({\n        path: '/goods'\n      });\n    },\n\n    yc() {\n      this.bool = false;\n    },\n\n    handleClick(id) {\n      this.isLoading = true;\n      axios.post(\"https://dahua0822-api.herokuapp.com/cart/select\", {\n        productId: id\n      }).then(res => {\n        axios.get(\"https://dahua0822-api.herokuapp.com/cart\").then(res => {\n          this.isLoading = false; // console.log(res.data.data);\n\n          this.car = res.data.data.items;\n          this.subTotal = res.data.data.subTotal;\n        });\n      });\n    },\n\n    decrement(id) {\n      this.isLoading = false;\n      axios.post(\"https://dahua0822-api.herokuapp.com/cart\", {\n        productId: id,\n        quantity: -1\n      }).then(res => {\n        axios.get(\"https://dahua0822-api.herokuapp.com/cart\").then(res => {\n          // console.log(res.data.data);\n          this.car = res.data.data.items;\n          this.subTotal = res.data.data.subTotal;\n        });\n      });\n    },\n\n    increment(id) {\n      axios.post(\"https://dahua0822-api.herokuapp.com/cart\", {\n        productId: id,\n        quantity: 1\n      }).then(res => {\n        axios.get(\"https://dahua0822-api.herokuapp.com/cart\").then(res => {\n          // console.log(res.data.data);\n          this.car = res.data.data.items;\n          this.subTotal = res.data.data.subTotal;\n        });\n      });\n    },\n\n    aaa() {\n      this.bool = true;\n    }\n\n  },\n  computed: {\n    total() {\n      let total = 0;\n      this.car.forEach(item => {\n        if (item.checked) {\n          total += item.quantity;\n        }\n      });\n      return total;\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAyDA;AACA;AACA;EACAA,gBADA;EAEAC;IACAC;EADA,CAFA;;EAMAC;IACA;MACAC,OADA;MAEAC,YAFA;MAGAC,QAHA;MAIAC;IAJA;EAOA,CAdA;;EAgBAC;IACA;IACAC;MACA;MACA;MACA;MACA;IACA,CALA;EAMA,CAxBA;;EA0BAC;IACAC;MACA;QACAC;MADA;IAGA,CALA;;IAMAC;MACA;IACA,CARA;;IASAC;MACA;MACAL,MACAM,IADA,CACA,iDADA,EACA;QACAC;MADA,CADA,EAIAC,IAJA,CAIAC;QAEAT;UACA,uBADA,CAEA;;UACA;UACA;QACA,CALA;MAMA,CAZA;IAaA,CAxBA;;IAyBAU;MACA;MACAV,MACAM,IADA,CACA,0CADA,EACA;QACAC,aADA;QAEAI;MAFA,CADA,EAKAH,IALA,CAKAC;QACAT;UACA;UACA;UACA;QACA,CAJA;MAKA,CAXA;IAYA,CAvCA;;IAwCAY;MACAZ,MACAM,IADA,CACA,0CADA,EACA;QACAC,aADA;QAEAI;MAFA,CADA,EAKAH,IALA,CAKAC;QACAT;UACA;UACA;UACA;QACA,CAJA;MAKA,CAXA;IAYA,CArDA;;IAsDAa;MACA;IACA;;EAxDA,CA1BA;EAoFAC;IACAC;MACA;MACA;QACA;UACAA;QACA;MAEA,CALA;MAMA;IACA;;EAVA;AApFA","names":["name","components","Loading","data","car","subTotal","bool","isLoading","created","axios","methods","toGoogs","path","yc","handleClick","post","productId","then","res","decrement","quantity","increment","aaa","computed","total"],"sourceRoot":"src/views","sources":["Car.vue"],"sourcesContent":["<template>\n  <div>\n    <div @click=\"toGoogs\" style=\"padding:25px\">\n       《去商品列表\n    </div>\n    <ul>\n      <li v-for=\"item in car\" :key=\"item._id\">\n        <span\n          class=\"check\"\n          @click=\"handleClick(item.productId._id)\"\n          :style=\"{\n            background: item.checked ? 'yellow' : '',\n            border: item.checked ? 'none' : '1px solid #ccc',\n          }\"\n        ></span>\n        <div class=\"content\">\n          <img :src=\"item.productId.image\" alt=\"\" />\n          <div class=\"price\">\n            <p class=\"name11\" style=\"fontsize: 12px\">\n              {{ item.productId.name }}\n            </p>\n            <p style=\"fontsize: 12px; color: rgba(204, 204, 204, 1)\">\n              ¥{{ item.price }}\n            </p>\n            <p style=\"fontsize: 14px; fontweight: 700\">¥{{ item.total }}</p>\n          </div>\n          <div class=\"jj\">\n            <span class=\"btn\" @click=\"decrement(item.productId._id)\">-</span>\n            <span style=\"fontsize: 14px; fontweight: 700\">{{\n              item.quantity\n            }}</span>\n            <span class=\"btn\" @click=\"increment(item.productId._id)\">+</span>\n          </div>\n        </div>\n      </li>\n    </ul>\n    <div class=\"footer\">\n      <div class=\"total\">\n        <span style=\"fontsize: 12px\">共计：{{ total }}件</span>\n        <span style=\"fontsize: 12px\"\n          >合计：<span style=\"fontsize: 16px; fontweight: 700\">{{\n            subTotal\n          }}</span\n          >元</span\n        >\n      </div>\n      <p class=\"zf\" @click=\"aaa\">支付</p>\n    </div>\n    <img src=\"../images/WechatIMG262.jpeg\" alt=\"\" class=\"ddd\" :style=\"{\n      display: bool ? 'block' : 'none',\n    }\" @click=\"yc\">\n    <Loading v-if=\"isLoading\"></Loading>\n  </div>\n  \n</template>\n\n<script>\nimport axios from \"axios\";\nimport Loading from '../components/Loading.vue'\nexport default {\n  name: \"VueYdCar\",\n  components:{\n    Loading\n  },\n\n  data() {\n    return {\n      car: [],\n      subTotal: \"\",\n      bool:'',\n      isLoading:false\n\n    };\n  },\n\n  created() {\n    this.isLoading=true\n    axios.get(\"https://dahua0822-api.herokuapp.com/cart\").then((res) => {\n      // console.log(res.data.data);\n      this.isLoading=false\n      this.car = res.data.data.items;\n      this.subTotal = res.data.data.subTotal;\n    });\n  },\n\n  methods: {\n    toGoogs(){\n      this.$router.push({\n        path:'/goods'\n      })\n    },\n    yc(){\n      this.bool=false\n    },\n    handleClick(id) {\n      this.isLoading=true\n      axios\n        .post(\"https://dahua0822-api.herokuapp.com/cart/select\", {\n          productId: id,\n        })\n        .then((res) => {\n          \n          axios.get(\"https://dahua0822-api.herokuapp.com/cart\").then((res) => {\n            this.isLoading=false\n            // console.log(res.data.data);\n            this.car = res.data.data.items;\n            this.subTotal = res.data.data.subTotal;\n          });\n        });\n    },\n    decrement(id) {\n      this.isLoading=false\n      axios\n        .post(\"https://dahua0822-api.herokuapp.com/cart\", {\n          productId: id,\n          quantity: -1,\n        })\n        .then((res) => {\n          axios.get(\"https://dahua0822-api.herokuapp.com/cart\").then((res) => {\n            // console.log(res.data.data);\n            this.car = res.data.data.items;\n            this.subTotal = res.data.data.subTotal;\n          });\n        });\n    },\n    increment(id) {\n      axios\n        .post(\"https://dahua0822-api.herokuapp.com/cart\", {\n          productId: id,\n          quantity: 1,\n        })\n        .then((res) => {\n          axios.get(\"https://dahua0822-api.herokuapp.com/cart\").then((res) => {\n            // console.log(res.data.data);\n            this.car = res.data.data.items;\n            this.subTotal = res.data.data.subTotal;\n          });\n        });\n    },\n    aaa(){\n      this.bool=true\n    }\n  },\n  computed: {\n    total() {\n      let total = 0;\n      this.car.forEach((item) => {\n        if(item.checked){\n          total += item.quantity;\n        }\n        \n      });\n      return total;\n    },\n  },\n};\n</script>\n\n<style  scoped>\n.ddd{\n  width: 200px;\n  height: 200px;\n  position: fixed;\n  top: 100px ;\n  left: 90px;\n  display: none;\n}\nul {\n  width: 375px;\n  padding-bottom: 200px;\n}\nli {\n  width: 331px;\n  margin: 0 auto;\n  height: 98px;\n  margin-top: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n.check {\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  border: 1px solid #ccc;\n}\n.content {\n  width: 295px;\n  height: 98px;\n  background: white;\n  border-radius: 20px;\n  display: flex;\n  align-items: center;\n}\n.content img {\n  width: 70px;\n  height: 70px;\n  border-radius: 20px;\n  margin-left: 14px;\n}\n.price {\n  height: 70px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  margin-left: 10px;\n  width: 130px;\n}\n.jj {\n  margin-left: 10px;\n  width: 50px;\n  display: flex;\n  justify-content: space-between;\n  height: 20px;\n  margin-top: 50px;\n}\n.btn {\n  width: 16px;\n  height: 16px;\n  border-radius: 3px;\n  background: rgba(255, 223, 117, 1);\n  text-align: center;\n  line-height: 16px;\n}\n.footer {\n  width: 375px;\n  background: white;\n  height: 135px;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  border-radius: 20px 20px 0 0;\n}\n.total {\n  width: 335px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 60px;\n}\n.zf {\n  width: 335px;\n  height: 58px;\n  margin: 0 auto;\n  background: rgba(255, 223, 117, 1);\n  border-radius: 20px;\n  font-size: 16px;\n  font-weight: 900px;\n  text-align: center;\n  line-height: 58px;\n}\n.name11 {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n</style>"]},"metadata":{},"sourceType":"module"}